<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nile Inc.</title>

    <!-- CSS -->
    <link rel="stylesheet" type="text/css" href="style.css">

    <!-- Bootstrap -->
    <link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">


    <!-- JavaScript -->
    <script language="javascript" type="text/javascript" src="validate.js" defer></script>


    <!-- ### JAVASCRIPT - Functions -->
    <script language="javascript" type="text/javascript">


        function entrar(elemento) {
            elemento.style.backgroundColor = "lightblue";
        }

        function salir(elemento) {
            elemento.style.backgroundColor = "";
        }


        //function Número Factura
        function validarNumeroInside(elemento, min, max) {

            if (!validarNumber(elemento.value, min, max)) {
                elemento.className = 'form-control datos is-invalid';
            } else {
                elemento.className = 'form-control datos is-valid';
            }
        }


        //Fecha
        function validarFechaInside(elemento) {

            if (esFecha(elemento.value)) {
                elemento.className = 'form-control datos is-valid';
            }
            else {
                elemento.className = 'form-control datos is-invalid';
            }
        }


        //function Nombre Cliente / Dirección / Ciudad
        function validarStringInside(elemento, min, max) {

            if (!validarString(elemento.value, min, max)) {
                elemento.className = 'form-control datos is-invalid';
            } else {
                elemento.className = 'form-control datos is-valid';
            }
        }


        //function Código Postal
        function validarCPInside(elemento) {

            if (!validarCP(elemento)) {
                elemento.className = 'form-control datos is-invalid';
            } else {
                elemento.className = 'form-control datos is-valid';
                provincia(elemento);
            }
        }


        //Validar DNI
        function validarDNIInside(elemento) {

            if (!validarDNI(elemento.value)) {
                elemento.className = 'form-control datos is-invalid';

            } else {
                elemento.className = 'form-control datos is-valid';

            }

        }


        //function Móvil
        function validarMovilInside(elemento) {

            if (!validarMovil(elemento.value)) {
                elemento.className = 'form-control datos is-invalid';

            } else {
                elemento.className = 'form-control datos is-valid';
            }
        }


        //function Email
        function validarEmailInside(elemento) {

            if (!validarEmail(elemento.value)) {
                elemento.className = 'form-control datos is-invalid';

            } else {
                elemento.className = 'form-control datos is-valid';
            }
        }


        //Genera un Captcha
        function generarCaptcha() {
            Valor1 = 1 + Math.floor(Math.random() * 10);
            Valor2 = 1 + Math.floor(Math.random() * 10);
            document.getElementById("valor1Captcha").innerHTML = Valor1;
            document.getElementById("valor2Captcha").innerHTML = Valor2;
            document.getElementById("resultadoCaptcha").value = "";
        }

        //validar Captcha
        function validarCaptcha(elemento) {
            var valor1 = document.getElementById("valor1Captcha").innerHTML;
            var valor2 = document.getElementById("valor2Captcha").innerHTML;
            var suma = Number(valor1) + Number(valor2);

            if (elemento.value != suma) {
                elemento.className = 'form-control datos is-invalid';

            }
            else {
                elemento.className = 'form-control datos is-valid';
            }
        }



    </script>


</head>

<body onload="generarCaptcha()">

    <!-- 1ª parte - FORMULARIO -->
    <div class="cabecera" style="text-align: center;">

        <div class="row">

            <div class="col-sm-6 border-end">
                <br>
                <h2 style="font-size: 27px; text-shadow: 3px 3px 3px rgb(94, 93, 93);">NILE Inc.</h2>
                <br>
                <p style="font-size: medium; text-align: center;">Somos una empresa comprometida con la cultura; por eso, cada día un poema:</p>
                <pre style="font-size: medium; text-align: center;">

From dewy dreams, my soul, arise,
From love's deep slumber and from death,
For lo! the trees are full of sighs
Whose leaves the morn admonisheth.

Eastward the gradual dawn prevails
Where softly-burning fires appear,
Making to tremble all those veils
Of grey and golden gossamer.

While sweetly, gently, secretly,
The flowery bells of morn are stirred
And the wise choirs of faery
Begin (innumerous!) to be heard.

                    'From Dewy Dreams'
                    - James Royce
                </pre>
            </div>


            <div class="col-lg-6 border-start">

                <div class="parte-izquierda">

                    <h2 style="text-align: start;">→ Datos del Cliente</h2>
                    <br>

                    <!-- Formulario Factura -->
                    <form id="formulario" action="javascript:alert(recuperarDatos())" onsubmit="return validarForm()">

                        <!-- Número Factura -->
                        <div class="row align-items-center text-end">

                            <div class="col-3">
                                <div class="input-group-text form-control">Número. Factura: (*)</div>
                            </div>

                            <div class="col-5">
                                <input class="form-control datos" id="numeroFactura" type="text"
                                    placeholder="Núm. Factura" maxlength="60" onfocus="entrar(this)"
                                    onblur="salir(this);" onkeyup="validarNumeroInside(this,1,60)">
                            </div>

                        </div>

                        <br>

                        <!-- Fecha -->
                        <div class="row align-items-center text-end">

                            <div class="col-3">
                                <div class="input-group-text form-control">Fecha: (*)</div>
                            </div>

                            <div class="col-5">
                                <input class="form-control datos" id="fecha" type="text" placeholder="dd/mm/aaaa"
                                    maxlength="10" onfocus="entrar(this)" onblur="salir(this);"
                                    onkeyup="validarFechaInside(this)">
                            </div>

                        </div>

                        <br>

                        <!-- Nombre Cliente -->
                        <div class="row align-items-center text-end">

                            <div class="col-3">
                                <div class="input-group-text form-control">Nombre cliente: (*)</div>
                            </div>

                            <div class="col-5">
                                <input class="form-control datos" id="nombreCliente" type="text"
                                    placeholder="Nombre cliente" maxlength="60" onfocus="entrar(this)"
                                    onblur="salir(this);" onkeyup="validarStringInside(this,1,60)">
                            </div>

                        </div>

                        <br>

                        <!-- Dirección -->
                        <div class="row align-items-center text-end">

                            <div class="col-3">
                                <div class="input-group-text form-control">Dirección: (*)</div>
                            </div>

                            <div class="col-5">
                                <input class="form-control datos" id="direccion" type="text" placeholder="Dirección"
                                    maxlength="60" onfocus="entrar(this)" onblur="salir(this);"
                                    onkeyup="validarStringInside(this,1,80)">
                            </div>

                        </div>

                        <br>

                        <!-- Código Postal -->
                        <div class="row align-items-center text-end">

                            <div class="col-3">
                                <div class="input-group-text form-control">Código Postal: (*)</div>
                            </div>

                            <div class="col-2">
                                <input class="form-control datos" id="codigoPostal" type="text" placeholder="CP"
                                    maxlength="5" onfocus="entrar(this)" onblur="salir(this);"
                                    onkeyup="validarCPInside(this)">
                            </div>

                            <!-- Provincia (se completa solo al introducir Código Postal) -->
                            <div class="col-3">
                                <div class="input-group-text form-control">Provincia: (*)</div>
                            </div>

                            <div class="col-2">
                                <input class="form-control datos" id="provincia" type="text" placeholder="Provincia"
                                    maxlength="60" readonly onfocus="entrar(this)" onblur="salir(this);">
                            </div>

                        </div>

                        <br>

                        <!-- Ciudad -->
                        <div class="row align-items-center text-end">

                            <div class="col-3">
                                <div class="input-group-text form-control">Ciudad: (*)</div>
                            </div>

                            <div class="col-5">
                                <input class="form-control datos" id="ciudad" type="text" placeholder="Ciudad"
                                    maxlength="60" onfocus="entrar(this)" onblur="salir(this);"
                                    onkeyup="validarStringInside(this,1,60)">
                            </div>

                        </div>

                        <br>

                        <!-- CIF/NIF -->
                        <div class="row align-items-center text-end">

                            <div class="col-3">
                                <div class="input-group-text form-control">CIF/NIF:</div>
                            </div>

                            <div class="col-5">
                                <input class="form-control datos" id="cifNif" type="text" placeholder="Nº documento"
                                    maxlength="60" onfocus="entrar(this)" onblur="salir(this);"
                                    onkeyup="validarDNIInside(this)">
                            </div>

                        </div>

                        <br>

                        <!-- Teléfono de contacto -->
                        <div class="row align-items-center text-end">

                            <div class="col-3">
                                <div class="input-group-text form-control">Teléfono contacto:</div>
                            </div>

                            <div class="col-5">
                                <input class="form-control datos" id="telefonoContacto" type="text"
                                    placeholder="Teléfono de contacto" maxlength="9" onfocus="entrar(this)"
                                    onblur="salir(this);" onkeyup="validarMovilInside(this)">
                            </div>

                        </div>

                        <br>

                        <!-- Email -->
                        <div class="row align-items-center text-end">

                            <div class="col-3">
                                <div class="input-group-text form-control">Email: (*)</div>
                            </div>

                            <div class="col-5">
                                <input class="form-control datos" id="email" type="text" placeholder="Email"
                                    maxlength="60" onfocus="entrar(this)" onblur="salir(this);"
                                    onkeyup="validarEmailInside(this)">
                            </div>

                        </div>

                        <br>

                        <!-- Captcha -->
                        <div class="row align-items-center text-end">

                            <div class="col-3">
                                <span class="input-group-text form-control"> Captcha:
                                    <div id="valor1Captcha">0</div> + <div id="valor2Captcha">0</div>
                                </span>
                            </div>

                            <div class="col-5">
                                <input class="form-control datos" id="resultadoCaptcha" type="text"
                                    placeholder="Captcha" maxlength="60" onfocus="entrar(this)"
                                    onblur="salir(this); validarCaptcha(this)">
                            </div>

                        </div>

                        <br>

                        <!-- Botón -->
                        <div class="row align-items-center text-end">

                            <div class="col-10">
                                <button id="buttonDatos" class="btn btn-success" type="button" value="buttonDatos"
                                    onmouseover="entrar(this);" onmouseout="salir(this)" onclick="validarForm()">Enviar factura</button>
                            </div>

                        </div>

                    </form>
                </div>
            </div>
        </div>
        <br>
    </div>
    
    <!-- 2ª parte - FILAS -->
    
    <div class="cabecera" style="text-align: center;">
        <h2 style="text-align: center;"> → Factura </h2>
    </div>

    <div class="filas fact">

        <!-- Formulario Filas -->
        <form id="formulario" action="javascript:alert(recuperarDatosFactura())" onsubmit="return validarFormFactura()">

            <!-- Botón - Añadir Filas -->
            <div class="row align-items-center text-start">

                <div class="col-10">
                    <button id="anadirFilas" class="btn btn-success" type="button" value="button"
                        onmouseover="entrar(this);" onmouseout="salir(this)" onclick="insertarLinea()">Añadir
                        fila</button>
                </div>

            </div>

            <br>

            <!-- Tabla -->
            <div class="row align-items-center text-start">

                <div class="row">
                    <table id="tabla" class="table table-striped">
                        <tr>
                            <th class="col-1">Cantidad</th>
                            <th class="col-1">Descripcion</th>
                            <th class="col-1">Precio</th>
                            <th class="col-1">IVA % </th>
                            <th class="col-1">IVA </th>
                            <th class="col-1">Importe </th>
                            <th class="col-1">Total </th>
                            <th class="col-1">Borrar </th>
                        </tr>
                        <tr>
                            <td></td>
                        </tr>
                    </table>
                </div>

            </div>

            <br>

            <!-- Botón - Generar Factura -->
            <div class="row align-items-center text-start">

                <div class="col-10">
                    <button id="button" class="btn btn-success" type="button" value="buttonFactura"
                        onmouseover="entrar(this);" onmouseout="salir(this)" onclick="validarFormFactura()">Generar
                        factura</button>
                </div>

            </div>

            <br>

            <!-- IVA 21% -->
            <div class="row align-items-center text-end">

                <!-- Base IVA 21% -->
                <div class="col-2">
                    <div class="input-group-text form-control">Base IVA 21%</div>
                </div>

                <div class="col-2">
                    <input class="form-control datos" id="baseIVA21" type="text" placeholder="Base IVA 21%"
                        maxlength="60" readonly onfocus="entrar(this)" onblur="salir(this);"
                        onkeyup="validarStringInside(this,2,60)">
                    <p class="invalid-feedback" id="errorBaseIVA21" style="text-align: center;">El nombre debe
                        tener entre 2 y 60 caracteres</p>
                </div>

                <!-- Valor IVA 21% -->
                <div class="col-2">
                    <div class="input-group-text form-control">IVA</div>
                </div>

                <div class="col-2">
                    <input class="form-control datos" id="IVA21" type="number" placeholder="Valor IVA 21%"
                        maxlength="60" readonly onfocus="entrar(this)" onblur="salir(this);"
                        onkeyup="validarStringInside(this,2,60)">
                    <p class="invalid-feedback" id="errorIVA21" style="text-align: center;">El nombre debe
                        tener entre 2 y 60 caracteres</p>
                </div>

            </div>

            <br>

            <!-- IVA 10% -->
            <div class="row align-items-center text-end">

                <!-- Base IVA 10% -->
                <div class="col-2">
                    <div class="input-group-text form-control">Base IVA 10%</div>
                </div>

                <div class="col-2">
                    <input class="form-control datos" id="baseIVA10" type="text" placeholder="Base IVA 10%"
                        maxlength="60" readonly onfocus="entrar(this)" onblur="salir(this);"
                        onkeyup="validarStringInside(this,2,60)">
                    <p class="invalid-feedback" id="errorBaseIVA10" style="text-align: center;">El nombre debe
                        tener entre 2 y 60 caracteres</p>
                </div>

                <!-- Valor IVA 10% -->
                <div class="col-2">
                    <div class="input-group-text form-control">IVA</div>
                </div>

                <div class="col-2">
                    <input class="form-control datos" id="IVA10" type="text" placeholder="Valor IVA 10%" maxlength="60"
                        readonly onfocus="entrar(this)" onblur="salir(this);" onkeyup="validarStringInside(this,2,60)">
                    <p class="invalid-feedback" id="errorIVA10" style="text-align: center;">El nombre debe
                        tener entre 2 y 60 caracteres</p>
                </div>

            </div>

            <br>

            <!-- IVA 4% -->
            <div class="row align-items-center text-end">

                <!-- Base IVA 4% -->
                <div class="col-2">
                    <div class="input-group-text form-control">Base IVA 4%</div>
                </div>

                <div class="col-2">
                    <input class="form-control datos" id="baseIVA4" type="text" placeholder="Base IVA 4%" maxlength="60"
                        readonly onfocus="entrar(this)" onblur="salir(this);" onkeyup="validarStringInside(this,2,60)">
                    <p class="invalid-feedback" id="errorBaseIVA4" style="text-align: center;">El nombre debe
                        tener entre 2 y 60 caracteres</p>
                </div>

                <!-- Valor IVA 10% -->
                <div class="col-2">
                    <div class="input-group-text form-control">IVA</div>
                </div>

                <div class="col-2">
                    <input class="form-control datos" id="IVA4" type="text" placeholder="Valor IVA 4%" maxlength="60"
                        readonly onfocus="entrar(this)" onblur="salir(this);" onkeyup="validarStringInside(this,2,60)"
                        onchange="modificarTotalFactura()">
                    <p class="invalid-feedback" id="errorIVA4" style="text-align: center;">El nombre debe
                        tener entre 2 y 60 caracteres</p>
                </div>

            </div>

            <br>

            <!-- Total -->
            <div class="row align-items-center text-end">

                <div class="col-md-1">
                    <div class="input-group-text form-control">Total</div>
                </div>

                <div class="col-md-3">
                    <input class="form-control datos" id="totalFactura" type="text" placeholder="Total en €"
                        maxlength="60" readonly onfocus="entrar(this)" onblur="salir(this);">
                    <p class="invalid-feedback" id="errorTotal" style="text-align: center;">El nombre debe
                        tener entre 2 y 60 caracteres</p>
                </div>

            </div>

            <br>

        </form>

    </div>

</body>

</html>